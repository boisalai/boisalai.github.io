<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-snippets/langchain/langchain" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">ü¶úÔ∏èüîó LangChain | Alain Boisvert</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://boisalai.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://boisalai.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://boisalai.github.io/docs/snippets/langchain"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ü¶úÔ∏èüîó LangChain | Alain Boisvert"><meta data-rh="true" name="description" content="Hugging Face API"><meta data-rh="true" property="og:description" content="Hugging Face API"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://boisalai.github.io/docs/snippets/langchain"><link data-rh="true" rel="alternate" href="https://boisalai.github.io/docs/snippets/langchain" hreflang="en"><link data-rh="true" rel="alternate" href="https://boisalai.github.io/docs/snippets/langchain" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Alain Boisvert RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Alain Boisvert Atom Feed">



<link rel="stylesheet" href="/fonts/font-awesome/fontawesome.css">
<link rel="stylesheet" href="/fonts/font-awesome/solid.css">
<link rel="stylesheet" href="/fonts/font-awesome/regular.css">
<link rel="stylesheet" href="/fonts/font-awesome/brands.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2dcfce69.css">
<script src="/assets/js/runtime~main.7e1e92b9.js" defer="defer"></script>
<script src="/assets/js/main.e46baa82.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Alain Boisvert</b></a><a class="navbar__item navbar__link" target="" href="/docs/courses/ift-7022">IFT-7022</a><a class="navbar__item navbar__link" target="" href="/docs/courses/gif-7005">GIF-7005</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/boisalai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa-brands fa-github"> </a><a href="https://www.linkedin.com/in/alain-boisvert-98b058156/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa-brands fa-linkedin-in"> </a><a href="mailto:ay.boisvert@gmail.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa-solid fa-envelope"> </a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Alain Boisvert</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cv">Curriculum vit√¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learning">Learning path</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/certificates">Certificates</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/courses">Courses</a><button aria-label="Expand sidebar category &#x27;Courses&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/references">References</a><button aria-label="Expand sidebar category &#x27;References&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/code-snippets">Code Snippets</a><button aria-label="Collapse sidebar category &#x27;Code Snippets&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/snippets/hugging-face">Hugging Face</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/snippets/llama">Llama</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/snippets/openai">OpenAI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/snippets/python">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/snippets/vba">VBA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/snippets/langchain">ü¶úÔ∏èüîó LangChain</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/code-snippets"><span itemprop="name">Code Snippets</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ü¶úÔ∏èüîó LangChain</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ü¶úÔ∏èüîó LangChain</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hugging-face-api">Hugging Face API<a href="#hugging-face-api" class="hash-link" aria-label="Direct link to Hugging Face API" title="Direct link to Hugging Face API">‚Äã</a></h2>
<p>We need a <a href="https://huggingface.co/settings/tokens" target="_blank" rel="noopener noreferrer">Hugging Face account and API key</a> to use these endpoints.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">os.environ[&#x27;HUGGINGFACEHUB_API_TOKEN&#x27;] = &#x27;HF_API_KEY&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prompts">Prompts<a href="#prompts" class="hash-link" aria-label="Direct link to Prompts" title="Direct link to Prompts">‚Äã</a></h2>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install langchain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install huggingface_hub</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain import PromptTemplate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain import HuggingFaceHub, LLMChain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">template = &quot;&quot;&quot;Question: {question}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Answer: &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">prompt = PromptTemplate(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        template=template,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input_variables=[&#x27;question&#x27;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># user question</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">question = &quot;Which NFL team won the Super Bowl in the 2010 season?&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># initialize Hub LLM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hub_llm = HuggingFaceHub(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        repo_id=&#x27;google/flan-t5-xl&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    model_kwargs={&#x27;temperature&#x27;:1e-10}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># create prompt template &gt; LLM chain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">llm_chain = LLMChain(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    prompt=prompt,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    llm=hub_llm</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># ask the user question about NFL 2010</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">print(llm_chain.run(question))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To ask multiple questions, we can try two approaches:</p>
<ul>
<li>Iterate through all questions using the <code>generate</code> method, answering them one at a time.</li>
<li>Place all questions into a single prompt for the LLM; this will only work for more advanced LLMs.</li>
</ul>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">qs = [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {&#x27;question&#x27;: &quot;Which NFL team won the Super Bowl in the 2010 season?&quot;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {&#x27;question&#x27;: &quot;If I am 6 ft 4 inches, how tall am I in centimeters?&quot;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {&#x27;question&#x27;: &quot;Who was the 12th person on the moon?&quot;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {&#x27;question&#x27;: &quot;How many eyes does a blade of grass have?&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">res = llm_chain.generate(qs)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">res</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="langchain-with-llama2-ggml">Langchain with Llama2 GGML<a href="#langchain-with-llama2-ggml" class="hash-link" aria-label="Direct link to Langchain with Llama2 GGML" title="Direct link to Langchain with Llama2 GGML">‚Äã</a></h3>
<p>This code can run on Google Colab.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install -q ctransformers langchain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.llms import CTransformers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain import PromptTemplate, LLMChain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.callbacks.streaming_stdout import StreamingStdOutCallbackHandler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">llm = CTransformers(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        model=&quot;TheBloke/Llama-2-7B-Chat-GGML&quot;, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        model_file=&#x27;llama-2-7b-chat.ggmlv3.q2_K.bin&#x27;, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        callbacks=[StreamingStdOutCallbackHandler()])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">template = &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[INST] &lt;&lt;SYS&gt;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You are a helpful, respectful and honest assistant. Your answers are always brief.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;&lt;/SYS&gt;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{text}[/INST]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">prompt = PromptTemplate(template=template, input_variables=[&quot;text&quot;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">llm_chain = LLMChain(prompt=prompt, llm=llm)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">response = llm_chain.run(&quot;Why some days are terrible?&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="agents">Agents<a href="#agents" class="hash-link" aria-label="Direct link to Agents" title="Direct link to Agents">‚Äã</a></h2>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install langchain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install wikipedia</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install openai</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install openai</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.agents import load_tools</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.agents import initialize_agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.agents import AgentType</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.llms import OpenAI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">os.environ[&#x27;OPENAI_API_KEY&#x27;] = str(&quot;xxxxxxxxxxxxxxxxx&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">llm = OpenAI(temperature=0,model_name=&#x27;gpt-4-0314&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tools = load_tools([&quot;wikipedia&quot;], llm=llm)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">agent = initialize_agent(tools, llm, agent=&quot;zero-shot-react-description&quot;, verbose=True)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">agent.run(&quot;&quot;&quot;What is the square root of the year the founder of SpaceX and Tesla born </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">and what is the name of the first company he founded?&quot;&quot;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="querying-a-pdf-file-with-chatgpt">Querying a PDF File with ChatGPT<a href="#querying-a-pdf-file-with-chatgpt" class="hash-link" aria-label="Direct link to Querying a PDF File with ChatGPT" title="Direct link to Querying a PDF File with ChatGPT">‚Äã</a></h2>
<blockquote>
<p>2023-08-30</p>
</blockquote>
<p>Here is a guide for querying a PDF file using ChatGPT.</p>
<p>To get started, open a new <a href="https://colab.google/" target="_blank" rel="noopener noreferrer">Colab</a> notebook and follow these steps:</p>
<p><a href="https://colab.research.google.com/drive/1KvZyC81-lhzNJiBDbRAHZLJ5K9KXZfWn?usp=drive_link" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab" class="img_ev3q"></a></p>
<p>Install the required libraries.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip3 install langchain pypdf chromadb openai tiktoken --quiet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Enter your <a href="https://platform.openai.com/account/api-keys" target="_blank" rel="noopener noreferrer">OpenAI API key</a> as shown below:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import getpass</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">os.environ[&#x27;OPENAI_API_KEY&#x27;] = getpass.getpass(&#x27;OpenAI API Key:&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Import the necessary libraries:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.document_loaders import PyPDFLoader </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.embeddings import OpenAIEmbeddings </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.vectorstores import Chroma </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.chains import ConversationalRetrievalChain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.memory import ConversationBufferMemory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.chat_models import ChatOpenAI</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Download the PDF document you want to query. In this example, we will use a 472-page document, the Budgetary Plan for the 2023-2024 Budget:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">!curl -o paper.pdf http://www.finances.gouv.qc.ca/Budget_et_mise_a_jour/budget/documents/Budget2324_PlanBudgetaire.pdf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Specify the path to the PDF file and load the pages of the document:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pdf_path = &quot;./paper.pdf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">loader = PyPDFLoader(pdf_path)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages = loader.load_and_split()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Create embeddings using OpenAIEmbeddings:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">embeddings = OpenAIEmbeddings()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Generate a vector database from the document pages using Chroma:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">vectordb = Chroma.from_documents(pages, embedding=embeddings, persist_directory=&quot;.&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">vectordb.persist()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Set up a conversational memory using ConversationBufferMemory:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">memory = ConversationBufferMemory(memory_key=&quot;chat_history&quot;, return_messages=True)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Create a conversational retrieval chain using ConversationalRetrievalChain:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">llm = ChatOpenAI(model_name=&quot;gpt-4&quot;, temperature=0.8) </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pdf_qa = ConversationalRetrievalChain.from_llm(llm, vectordb.as_retriever(), memory=memory)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Define a function to query the PDF document:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">def query(query: str):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    memory.clear()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    result = pdf_qa({&quot;question&quot;: query})</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    print(result[&quot;answer&quot;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ask specific questions and get answers from the document:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">query(&quot;What are the highlights of the budget plan of the government of Quebec?&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">query(&quot;What is the financial situation of the government of Quebec evolving?&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">query(&quot;How is the net debt evolving?&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">query(&quot;Quels sont les faits saillants du plan budg√©taire du gouvernement du Qu√©bec?&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">query(&quot;Quelle est l&#x27;√©volution de la situation financi√®re du gouvernement du Qu√©bec?&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">query(&quot;Comment √©volue la dette nette?&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The code above will generate responses like these.
Please note that large language models do not always produce the same results.
When running the code in your notebook, you may get slightly different responses.&quot;</p>
<p>IN FRENCH:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Le plan budg√©taire du Qu√©bec pour 2023-2024 comporte plusieurs points saillants. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tout d&#x27;abord, le gouvernement pr√©voit un retour √† l&#x27;√©quilibre budg√©taire en </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2027-2028. Depuis mars 2022, la situation budg√©taire du Qu√©bec s&#x27;est am√©lior√©e </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gr√¢ce √† une forte croissance √©conomique, malgr√© l&#x27;inflation et l&#x27;augmentation </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rapide des taux d&#x27;int√©r√™t. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Le cadre financier pr√©sente des r√©visions favorables de 5,5 milliards de dollars</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">en 2022-2023, de 6,5 milliards de dollars en 2023-2024, et de 7,7 milliards de </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dollars en 2024-2025. Ces r√©visions sont principalement attribuables √† une </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hausse des revenus du gouvernement, en particulier des revenus fiscaux. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Toutefois, ces augmentations sont en partie compens√©es par une augmentation des</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">d√©penses de 1,8 milliard de dollars en 2022-2023, de 2,5 milliards de dollars en</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2023-2024, et de 2,4 milliards de dollars en 2024-2025. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Ces am√©liorations permettent de nouvelles initiatives de 6,6 milliards de </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dollars en 2022-2023 et en 2023-2024, puis de 7,4 milliards de dollars en </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2024-2025. Ces sommes seront utilis√©es pour accro√Ætre la richesse du Qu√©bec, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">d√©velopper le potentiel des jeunes et rendre le r√©seau de la sant√© plus </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">performant et plus humain. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Enfin, le gouvernement pr√©voit d&#x27;√©liminer graduellement le d√©ficit budg√©taire de</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">5,0 milliards de dollars pr√©vu en 2022-2023 √† raison de 1 milliard de dollars </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">par ann√©e. √Ä partir de 2025-2026, le solde budg√©taire devrait afficher des </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">surplus.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">L&#x27;√©volution r√©cente de la situation financi√®re du gouvernement du Qu√©bec est </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">marqu√©e par des r√©visions favorables des revenus. Ces r√©visions rendent possible</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">le retour √† l&#x27;√©quilibre budg√©taire en 2027-2028, tout en soutenant la croissance</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√©conomique et la cr√©ation de richesse. Cependant, un ralentissement de </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">l&#x27;activit√© √©conomique au Qu√©bec est attendu en 2023. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Des am√©liorations de 6,6 milliards de dollars en moyenne de 2022-2023 √† </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2024-2025 ont √©t√© pr√©sent√©esdans le budget 2022-2023. Pour cette p√©riode, le </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gouvernement pr√©voit de nouvelles initiatives de 6,6 milliards de dollars en </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2022-2023 et en 2023-2024, puis de 7,4 milliards de dollars en 2024-2025. Ces </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fonds seront utilis√©s pour accro√Ætre la richesse du Qu√©bec, d√©velopper le </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">potentiel des jeunes et rendre le r√©seau de la sant√© plus performant et plus </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">humain. Ces montants incluent le d√©ploiement du Bouclier anti-inflation annonc√© </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">√† l&#x27;automne 2022.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Les versements au Fonds des g√©n√©rations conna√Ætront une croissance plus mod√©r√©e, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">principalement en raison des modifications pr√©vues concernant les sources de </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">revenus consacr√©s √† ce fonds √† partir de 2023-2024.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">La dette nette du Qu√©bec √©volue de mani√®re d√©croissante. Au 31 mars 2023, la </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dette nette du Qu√©bec s&#x27;√©tablira √† 206,8 milliards de dollars, soit √† 37,4 % du </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PIB. Une diminution √† 35,8 % du PIB est pr√©vue d&#x27;ici 2027-2028. Le retour √† </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">l&#x27;√©quilibre budg√©taire, les versements au Fonds des g√©n√©rations et la </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">progression de l&#x27;√©conomie contribuent √† cette r√©duction de la dette nette.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I hope this helps!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-conversational-memory-to-the-chatgpt-api-with-langchain">Add Conversational Memory To The ChatGPT API With LangChain<a href="#add-conversational-memory-to-the-chatgpt-api-with-langchain" class="hash-link" aria-label="Direct link to Add Conversational Memory To The ChatGPT API With LangChain" title="Direct link to Add Conversational Memory To The ChatGPT API With LangChain">‚Äã</a></h2>
<blockquote>
<p>2023-09-30</p>
</blockquote>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install langchain openai tiktoken --quiet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import openai</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.chat_models import ChatOpenAI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.chains import ConversationChain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.memory import ConversationSummaryBufferMemory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># openai.api_key = os.getenv(&quot;OPENAI_API_KEY&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># os.environ[&#x27;OPENAI_API_KEY&#x27;] = getpass.getpass(&#x27;OpenAI API Key:&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openai.api_key_path = &quot;api_key.txt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chat = ChatOpenAI(model_name=&quot;gpt-4&quot;, temperature=0.2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conversation = ConversationChain(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    llm=chat,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    memory=ConversationSummaryBufferMemory(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        llm=ChatOpenAI(), max_token_limit=2048</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    verbose=False,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conversation.predict(input=&quot;Hello world!&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conversation.predict(input=&quot;What is the capital of France?&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">conversation.predict(input=&quot;What was my previous question?&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The previous code should output something like this:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Hello! It&#x27;s great to connect with you. How can I assist you today?&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;The capital of France is Paris. It&#x27;s known for its beautiful architecture, rich history, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">and iconic landmarks like the Eiffel Tower, Louvre Museum, and Notre-Dame Cathedral.&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;Your previous question was &quot;What is the capital of France?&quot;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is another question.</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">from IPython.display import HTML</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">question = &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Un triangle ayant deux c√¥t√© $a$ et $b$. Quelle est la longueur de l&#x27;hypot√©nuse </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$c$ en LaTeX?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">html_string = conversation.predict(input=question)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">print(html_string)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">print(&quot;-----&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">display(HTML(html_string))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The previous code should output something like this:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">La longueur de l&#x27;hypot√©nuse $c$ d&#x27;un triangle avec des c√¥t√©s $a$ et $b$ en </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LaTeX est la suivante :</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">\[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">c = \sqrt{{a}^2 + {b}^2}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">\]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La longueur de l&#x27;hypot√©nuse <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span></span></span></span> d&#x27;un triangle avec des c√¥t√©s <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span> et <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">b</span></span></span></span> en
LaTeX est la suivante :</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>c</mi><mo>=</mo><msqrt><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">c = \sqrt{{a}^2 + {b}^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.1777em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0623em"><span class="svg-align" style="top:-3.2em"><span class="pstrut" style="height:3.2em"></span><span class="mord" style="padding-left:1em"><span class="mord"><span class="mord"><span class="mord mathnormal">a</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em"><span style="top:-2.989em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.0223em"><span class="pstrut" style="height:3.2em"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.1777em"><span></span></span></span></span></span></span></span></span></span>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-research-assistant-from-scratch">Building a Research Assistant from Scratch<a href="#building-a-research-assistant-from-scratch" class="hash-link" aria-label="Direct link to Building a Research Assistant from Scratch" title="Direct link to Building a Research Assistant from Scratch">‚Äã</a></h2>
<blockquote>
<p>2023-11-19</p>
</blockquote>
<p>The code below is from <a href="https://www.youtube.com/watch?v=DjuXACWYkkU" target="_blank" rel="noopener noreferrer">Building a Research Assistant from Scratch</a>.</p>
<p>See also:</p>
<ul>
<li><a href="https://app.tavily.com/chat" target="_blank" rel="noopener noreferrer">Tavily Chat</a></li>
<li><a href="https://docs.tavily.com/docs/tavily-api/introduction" target="_blank" rel="noopener noreferrer">Tavily Introduction</a></li>
<li><a href="https://github.com/assafelovic/gpt-researcher" target="_blank" rel="noopener noreferrer">GPT Researcher</a></li>
<li><a href="https://www.langchain.com/langsmith" target="_blank" rel="noopener noreferrer">Langsmith</a></li>
<li><a href="https://blog.langchain.dev/announcing-langsmith/" target="_blank" rel="noopener noreferrer">Announcing Langsmith</a></li>
<li><a href="https://docs.smith.langchain.com/overview" target="_blank" rel="noopener noreferrer">Langsmith Overview</a></li>
<li><a href="https://github.com/langchain-ai/langserve" target="_blank" rel="noopener noreferrer">Langserve</a></li>
<li><a href="https://platform.openai.com/docs/models/gpt-3-5" target="_blank" rel="noopener noreferrer">GPT-3.5 models</a></li>
<li><a href="https://gist.github.com/hwchase17/69a8cdef9b01760c244324339ab64f0c" target="_blank" rel="noopener noreferrer">This code</a></li>
<li><a href="https://api.python.langchain.com/en/latest/utilities/langchain.utilities.duckduckgo_search.DuckDuckGoSearchAPIWrapper.html" target="_blank" rel="noopener noreferrer">LangChain DuckDuckGoSearchAPIWrapper</a></li>
<li><a href="https://python.langchain.com/docs/get_started/quickstart#serving-with-langserve" target="_blank" rel="noopener noreferrer">Serving with LangServe</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-required-libraries">Install the required libraries<a href="#install-the-required-libraries" class="hash-link" aria-label="Direct link to Install the required libraries" title="Direct link to Install the required libraries">‚Äã</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install -U langchain openai duckduckgo-search --quiet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip show langchain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install requests beautifulsoup4 --quiet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-your-api-key-and-langchain-project">Set your API key and LangChain project<a href="#set-your-api-key-and-langchain-project" class="hash-link" aria-label="Direct link to Set your API key and LangChain project" title="Direct link to Set your API key and LangChain project">‚Äã</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import openai</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openai.api_key = os.environ[&#x27;OPENAI_API_KEY&#x27;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">os.environ[&quot;LANGCHAIN_TRACING_V2&quot;] = &quot;true&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">os.environ[&quot;LANGCHAIN_PROJECT&quot;] = &quot;research-assistant&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">os.environ[&quot;LANGCHAIN_ENDPOINT&quot;] = &quot;https://api.smith.langchain.com&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># os.environ[&quot;LANGCHAIN_API_KEY&quot;] = &quot;...&quot; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.chat_models import ChatOpenAI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.prompts import ChatPromptTemplate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.schema.output_parser import StrOutputParser</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import requests</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from bs4 import BeautifulSoup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.schema.runnable import RunnablePassthrough, RunnableLambda</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.utilities import DuckDuckGoSearchAPIWrapper</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MODEL = &quot;gpt-3.5-turbo-1106&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RESULTS_PER_QUESTION = 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># See https://python.langchain.com/docs/integrations/tools/ddg</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># See https://api.python.langchain.com/en/latest/utilities/langchain.utilities.duckduckgo_search.DuckDuckGoSearchAPIWrapper.htm</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ddg_search = DuckDuckGoSearchAPIWrapper()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def web_search(query: str, num_results: int = RESULTS_PER_QUESTION):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Perform a web search using DuckDuckGo&#x27;s API and return a list of result links</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    results = ddg_search.results(query, num_results)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return [r[&quot;link&quot;] for r in results]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUMMARY_TEMPLATE = &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{text} </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Using the above text, answer in short the following question: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; {question}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if the question cannot be answered using the text, imply summarize the text. Include </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">all factual information, numbers, stats etc if available.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;&quot;&quot;  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># See https://python.langchain.com/docs/modules/model_io/prompts/prompt_templates/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUMMARY_PROMPT = ChatPromptTemplate.from_template(SUMMARY_TEMPLATE)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def scrape_text(url: str):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Send a GET request to the webpage</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    try:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        response = requests.get(url)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        # Check if the request was successful</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if response.status_code == 200:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            # Parse the content of the request with BeautifulSoup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            soup = BeautifulSoup(response.text, &quot;html.parser&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            # Extract all text from the webpage</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            page_text = soup.get_text(separator=&quot; &quot;, strip=True)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            # Print the extracted text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return page_text</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return f&quot;Failed to retrieve the webpage: Status code {response.status_code}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    except Exception as e:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        print(e)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return f&quot;Failed to retrieve the webpage: {e}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">url = &quot;https://blog.langchain.dev/announcing-langsmith/&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scrape_and_summarize_chain = RunnablePassthrough.assign(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    summary = RunnablePassthrough.assign(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        text=lambda x: scrape_text(x[&quot;url&quot;])[:10000]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) | SUMMARY_PROMPT | ChatOpenAI(model=MODEL) | StrOutputParser()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) | (lambda x: f&quot;URL: {x[&#x27;url&#x27;]}\n\nSUMMARY: {x[&#x27;summary&#x27;]}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">web_search_chain = RunnablePassthrough.assign(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    urls = lambda x: web_search(x[&quot;question&quot;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) | (lambda x: [{&quot;question&quot;: x[&quot;question&quot;], &quot;url&quot;: u} for u in x[&quot;urls&quot;]]) | scrape_and_summarize_chain.map()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SEARCH_PROMPT = ChatPromptTemplate.from_messages(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        (</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;user&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Write 3 google search queries to search online that form an &quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;objective opinion from the following: {question}\n&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;You must respond with a list of strings in the following format: &quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &#x27;[&quot;query 1&quot;, &quot;query 2&quot;, &quot;query 3&quot;].&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">search_question_chain = SEARCH_PROMPT | ChatOpenAI(temperature=0) | StrOutputParser() | json.loads</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">full_research_chain = search_question_chain | (lambda x: [{&quot;question&quot;: q} for q in x]) | web_search_chain.map()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WRITER_SYSTEM_PROMPT = &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You are an AI critical thinker research assistant. Your sole purpose is to write well </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">written, critically acclaimed, objective and structured reports on given text.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Report prompts from </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># https://github.com/assafelovic/gpt-researcher/blob/master/gpt_researcher/master/prompts.py</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RESEARCH_REPORT_TEMPLATE = &quot;&quot;&quot;Information:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{research_summary}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Using the above information, answer the following question or topic: &quot;{question}&quot; in a detailed report -- \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The report should focus on the answer to the question, should be well structured, informative, \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">in depth, with facts and numbers if available and a minimum of 1,200 words.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You should strive to write the report as long as you can using all relevant and necessary information provided.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You must write the report with markdown syntax.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You MUST determine your own concrete and valid opinion based on the given information. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Do NOT deter to general and meaningless conclusions.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Write all used source urls at the end of the report, and make sure to not add duplicated sources, but only </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">one reference for each.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You must write the report in apa format.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Please do your best, this is very important to my career.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">prompt = ChatPromptTemplate.from_messages(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        (&quot;system&quot;, WRITER_SYSTEM_PROMPT),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        (&quot;user&quot;, RESEARCH_REPORT_TEMPLATE),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def collapse_list_of_lists(list_of_lists):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Collapse a list of lists into a single string with double line breaks.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    content = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    for l in list_of_lists:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        content.append(&quot;\n\n&quot;.join(l))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return &quot;\n\n&quot;.join(content)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chain = RunnablePassthrough.assign(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    research_summary = full_research_chain | collapse_list_of_lists</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) | prompt | ChatOpenAI(model=MODEL) | StrOutputParser()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">result = chain.invoke(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;question&quot;: &quot;what is the difference between langsmith and langchain&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from IPython.display import Markdown, display</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">display(Markdown(result))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>LangSmith is a developer platform that lets you debug, test, evaluate, and monitor chains built
on any LLM framework and seamlessly integrates with LangChain. With LangSmith, you should see this.</p>
<p><img loading="lazy" alt="s01" src="/assets/images/s01-b7574a4841e0af7848636dbadda32415.png" width="4006" height="2334" class="img_ev3q"></p>
<p>The previous code should return something like this.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Response</div><div class="admonitionContent_BuS1"><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Report on the Difference Between LangSmith and LangChain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Introduction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">In the rapidly evolving field of artificial intelligence (AI), frameworks and tools play a crucial role in the development and deployment of AI applications. LangSmith and LangChain are two such frameworks developed to address specific challenges in working with large language models (LLMs). This report aims to provide a detailed analysis of the differences between LangSmith and LangChain based on the information available from various sources.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## LangChain: A Framework for LLM-Powered Applications</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LangChain is a framework designed to facilitate the development of applications powered by language models. It offers high-level APIs for working with LLMs and provides off-the-shelf chains for quick start. The primary focus of LangChain is on prototyping and building intelligent agents capable of performing multiple tasks. As an open-source Python package, LangChain addresses the challenges of building LLM-powered applications, providing speed of iteration, choice, flexibility, and the latest cognitive architectures and interaction patterns out-of-the-box. Additionally, LangChain offers deeper product integrations with Microsoft, including ease of procurement in the Azure Marketplace and data security peace-of-mind with deployments within the customer‚Äôs Azure VPC ([LangChain Blog](https://blog.langchain.dev/langchain-expands-collaboration-with-microsoft/)).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## LangSmith: A Unified Platform for LLM-Powered Applications</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">On the other hand, LangSmith is positioned as a complementary Software as a Service (SaaS) product that aims to bridge the gap between prototyping and production for LLM-powered applications. It addresses key challenges in production environments by providing features for debugging, testing, evaluating, and monitoring LLM applications. LangSmith also offers a simple and intuitive user interface to reduce the barrier to entry for developers without a software background. Additionally, it integrates seamlessly with open-source evaluation modules for heuristic and LLM evaluations. LangSmith is designed to improve developer productivity, decrease time to production, and harden applications to be more reliable at scale ([LangSmith Blog](https://blog.langchain.dev/announcing-langsmith/)).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Key Differences</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 1. Focus and Purpose</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LangChain is primarily focused on prototyping and building intelligent agents capable of performing multiple tasks, while LangSmith is geared towards addressing production challenges and aims to bridge the gap between prototype and production for LLM-powered applications ([Medium - What is LangSmith and why should I care as a developer](https://logankilpatrick.medium.com/what-is-langsmith-and-why-should-i-care-as-a-developer-e5921deb54b5)).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 2. Features and Capabilities</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LangChain offers high-level APIs to work with LLMs and off-the-shelf chains for quick start, making it ideal for building intelligent agents. On the other hand, LangSmith provides features for debugging, testing, evaluating, and monitoring LLM applications, with a focus on providing a simple and intuitive user interface to reduce the barrier to entry for developers without a software background. LangSmith also integrates seamlessly with open-source evaluation modules for heuristic and LLM evaluations ([LogRocket - LangSmith: Test LLMS AI Applications](https://blog.logrocket.com/langsmith-test-llms-ai-applications/)).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 3. Development Stage</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LangSmith is described as the production counterpart to LangChain, indicating that LangChain is used for prototyping, while LangSmith is designed to tackle production challenges and provide a unified platform for LLM-powered applications ([Dev.to - What is LangSmith and why should I care as a developer](https://dev.to/logankilpatrick/what-is-langsmith-and-why-should-i-care-as-a-developer-19k)).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 4. Integration and Extensibility</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LangSmith aims to connect with as many tools as possible and is working on integrations with OpenAI evals and multiple fine-tuning providers. Additionally, it offers extensibility and the ability to integrate with other applications and services, which is a key feature that the authors would like to see ([Dev.to - What is LangSmith and why should I care as a developer](https://dev.to/logankilpatrick/what-is-langsmith-and-why-should-i-care-as-a-developer-19k)).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 5. User Interface and Usability</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LangSmith is specifically designed to provide a simple and intuitive user interface to facilitate tasks such as debugging, testing, evaluating, monitoring, and usage metrics, making it easier for developers to work with large language models. This emphasis on usability sets LangSmith apart from LangChain, which is focused more on the development and prototyping aspect of LLM-powered applications ([Medium - What is LangSmith and why should I care as a developer](https://logankilpatrick.medium.com/what-is-langsmith-and-why-should-i-care-as-a-developer-e5921deb54b5)).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Conclusion</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">In conclusion, LangChain and LangSmith serve different purposes in the development and deployment of LLM-powered applications. LangChain is primarily focused on prototyping and building intelligent agents, offering high-level APIs and off-the-shelf chains for quick start. On the other hand, LangSmith is designed to address production challenges by providing features for debugging, testing, evaluating, and monitoring LLM applications, with an emphasis on usability and integration with other tools and services. Both frameworks play significant roles in different stages of the development lifecycle of LLM-powered applications, and their distinct features and capabilities cater to different needs of developers in the AI space.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Overall, the choice between LangSmith and LangChain depends on the specific requirements of the development project, with LangChain being suitable for prototyping and building intelligent agents, while LangSmith is more suitable for addressing production challenges and providing a unified platform for LLM-powered applications.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## References</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* LangChain vs LlamaIndex: Difference and Which One to Choose. (n.d.). Retrieved from [Getting Started AI](https://www.gettingstarted.ai/langchain-vs-llamaindex-difference-and-which-one-to-choose/)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* Kilpatrick, L. (n.d.). What is LangSmith and Why Should I Care as a Developer? Retrieved from [Medium](https://logankilpatrick.medium.com/what-is-langsmith-and-why-should-i-care-as-a-developer-e5921deb54b5)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* Kilpatrick, L. (n.d.). What is LangSmith and Why Should I Care as a Developer? Retrieved from [DEV Community](https://dev.to/logankilpatrick/what-is-langsmith-and-why-should-i-care-as-a-developer-19k)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* Announcing LangSmith. (n.d.). Retrieved from [LangChain Blog](https://blog.langchain.dev/announcing-langsmith/)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* LangSmith: Test LLMS AI Applications. (n.d.). Retrieved from [LogRocket](https://blog.logrocket.com/langsmith-test-llms-ai-applications/)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* LangChain Expands Collaboration with Microsoft. (n.d.). Retrieved from [LangChain Blog](https://blog.langchain.dev/langchain-expands-collaboration-with-microsoft/)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>To search in ArXiv, you just need to replace a part of the code with this.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install arxiv --quiet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">!pip install langserve fastapi unicorn --quiet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">from langchain.retrievers import ArxivRetriever</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">retriever = ArxivRetriever()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUMMARY_TEMPLATE = &quot;&quot;&quot;{doc} </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Using the above text, answer in short the following question: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; {question}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if the question cannot be answered using the text, imply summarize the text. Include all factual information, numbers, stats etc if available.&quot;&quot;&quot;  # noqa: E501</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUMMARY_PROMPT = ChatPromptTemplate.from_template(SUMMARY_TEMPLATE)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scrape_and_summarize_chain = RunnablePassthrough.assign(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    summary =  SUMMARY_PROMPT | ChatOpenAI(model=&quot;gpt-3.5-turbo-1106&quot;) | StrOutputParser()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) | (lambda x: f&quot;Title: {x[&#x27;doc&#x27;].metadata[&#x27;Title&#x27;]}\n\nSUMMARY: {x[&#x27;summary&#x27;]}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">web_search_chain = RunnablePassthrough.assign(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    docs = lambda x: retriever.get_summaries_as_docs(x[&quot;question&quot;])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)| (lambda x: [{&quot;question&quot;: x[&quot;question&quot;], &quot;doc&quot;: u} for u in x[&quot;docs&quot;]]) | scrape_and_summarize_chain.map()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">web_search_chain.invoke({&quot;question&quot;: &quot;what papers did noam shazeer write?&quot;})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/snippets/langchain/langchain.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/snippets/vba"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">VBA</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#hugging-face-api" class="table-of-contents__link toc-highlight">Hugging Face API</a></li><li><a href="#prompts" class="table-of-contents__link toc-highlight">Prompts</a><ul><li><a href="#langchain-with-llama2-ggml" class="table-of-contents__link toc-highlight">Langchain with Llama2 GGML</a></li></ul></li><li><a href="#agents" class="table-of-contents__link toc-highlight">Agents</a></li><li><a href="#querying-a-pdf-file-with-chatgpt" class="table-of-contents__link toc-highlight">Querying a PDF File with ChatGPT</a></li><li><a href="#add-conversational-memory-to-the-chatgpt-api-with-langchain" class="table-of-contents__link toc-highlight">Add Conversational Memory To The ChatGPT API With LangChain</a></li><li><a href="#building-a-research-assistant-from-scratch" class="table-of-contents__link toc-highlight">Building a Research Assistant from Scratch</a><ul><li><a href="#install-the-required-libraries" class="table-of-contents__link toc-highlight">Install the required libraries</a></li><li><a href="#set-your-api-key-and-langchain-project" class="table-of-contents__link toc-highlight">Set your API key and LangChain project</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Alain Boisvert. Construit avec Docusaurus.</div></div></div></footer></div>
</body>
</html>